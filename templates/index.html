<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Barbearia PDV</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
</head>
<body>

<!-- FUNDO -->
<div class="bg"></div>

<!-- SIDEBAR -->
<div class="sidebar">
    <div class="logo">ğŸ’ˆ</div>
    <button onclick="showPage('pdv')">ğŸ’³</button>
    <button onclick="showPage('clientes')">ğŸ‘¤</button>
    <button onclick="showPage('servicos')">âœ‚ï¸</button>
    <button onclick="showPage('produtos')">ğŸ§´</button>
    <button onclick="showPage('planos')">ğŸ“¦</button>
    <button onclick="showPage('relatorio')">ğŸ“Š</button>
</div>

<!-- CONTEÃšDO -->
<div class="content">

<!-- PDV -->
<div id="pdv" class="page">
    <h1>PDV</h1>

    {% if not aberto %}
    <form method="POST" action="/abrir_caixa" class="box">
        <h3>Abrir Caixa</h3>
        <input name="saldo" placeholder="Saldo inicial">
        <button>Abrir Caixa</button>
    </form>
    {% else %}
    <a href="/fechar_caixa" class="btn-danger">Fechar Caixa</a>
    {% endif %}

    <form method="POST" action="/venda" class="box">
        <h3>Venda</h3>
        <input name="descricao" placeholder="DescriÃ§Ã£o (serviÃ§o/produto)" required>
        <input id="valor" name="valor" placeholder="Valor" required>

        <select id="pagamento" name="pagamento" onchange="calcularTroco()">
            <option>Dinheiro</option>
            <option>Pix</option>
            <option>CartÃ£o</option>
        </select>

        <input id="recebido" placeholder="Recebido (dinheiro)" onkeyup="calcularTroco()">
        <p id="troco"></p>

        <button>Finalizar Venda</button>
    </form>
</div>

<!-- CLIENTES -->
<div id="clientes" class="page hidden">
    <h1>Clientes</h1>
    <form method="POST" action="/add_cliente" class="box">
        <input name="nome" placeholder="Nome" required>
        <input name="telefone" placeholder="Telefone">
        <button>Salvar</button>
    </form>

    <ul class="lista">
        {% for c in clientes %}
        <li>{{ c[1] }} - {{ c[2] }}</li>
        {% endfor %}
    </ul>
</div>

<!-- SERVIÃ‡OS -->
<div id="servicos" class="page hidden">
    <h1>ServiÃ§os</h1>
    <form method="POST" action="/add_servico" class="box">
        <input name="nome" placeholder="ServiÃ§o" required>
        <input name="preco" placeholder="PreÃ§o" required>
        <button>Salvar</button>
    </form>

    <ul class="lista">
        {% for s in servicos %}
        <li>{{ s[1] }} - R$ {{ "%.2f"|format(s[2]) }}</li>
        {% endfor %}
    </ul>
</div>

<!-- PRODUTOS -->
<div id="produtos" class="page hidden">
    <h1>Produtos</h1>
    <form method="POST" action="/add_produto" class="box">
        <input name="nome" placeholder="Produto" required>
        <input name="preco" placeholder="PreÃ§o" required>
        <button>Salvar</button>
    </form>

    <ul class="lista">
        {% for p in produtos %}
        <li>{{ p[1] }} - R$ {{ "%.2f"|format(p[2]) }}</li>
        {% endfor %}
    </ul>
</div>

<!-- PLANOS -->
<div id="planos" class="page hidden">
    <h1>Planos</h1>
    <form method="POST" action="/add_plano" class="box">
        <input name="nome" placeholder="Nome do plano" required>
        <input name="valor" placeholder="Valor mensal" required>
        <button>Salvar</button>
    </form>

    <ul class="lista">
        {% for p in planos %}
        <li>{{ p[1] }} - R$ {{ "%.2f"|format(p[2]) }}</li>
        {% endfor %}
    </ul>
</div>

<!-- RELATÃ“RIO -->
<div id="relatorio" class="page hidden">
    <h1>RelatÃ³rio Mensal</h1>

    <div class="box">
        <p>ğŸ’µ Dinheiro: <strong>R$ {{ "%.2f"|format(total_dinheiro) }}</strong></p>
        <p>ğŸ“² Pix: <strong>R$ {{ "%.2f"|format(total_pix) }}</strong></p>
        <p>ğŸ’³ CartÃ£o: <strong>R$ {{ "%.2f"|format(total_cartao) }}</strong></p>
        <hr>
        <h2>Total do mÃªs: R$ {{ "%.2f"|format(total_mes) }}</h2>
    </div>

    <ul class="lista">
        {% for c in caixa %}
        <li>{{ c[1] }} - R$ {{ "%.2f"|format(c[2]) }} ({{ c[4] }})</li>
        {% endfor %}
    </ul>
</div>

</div>
</body>
</html>
